-- New Code!!!


<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced Chat</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
  }
  .chat-container {
    max-width: 600px;
    margin: 0 auto;
    padding: 20px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
  .chat-box {
    height: 400px;
    overflow: auto;
    border: 1px solid #ccc;
    padding: 10px;
  }
  .message {
    background-color: #f2f2f2;
    padding: 10px;
    margin: 10px 0;
    border-radius: 8px;
  }
  .user-message {
    background-color: #b2dffc;
    align-self: flex-end;
  }
  .input-box {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
  }
</style>
</head>
<body>
  <div class="chat-container">
    <div class="chat-box" id="chat-box"></div>
    <input class="input-box" id="input-box" type="text" placeholder="Type your message...">
  </div>
  
  <script>
    const chatBox = document.getElementById('chat-box');
    const inputBox = document.getElementById('input-box');

    // Simulated user authentication (replace with actual authentication)
    const currentUser = { username: 'User123' };

    inputBox.addEventListener('keydown', function(event) {
      if (event.key === 'Enter' && inputBox.value.trim() !== '') {
        const message = inputBox.value.trim();
        sendMessage(message);
        inputBox.value = '';
      }
    });

    function sendMessage(message) {
      const messageElement = createMessageElement(currentUser.username, message, true);
      chatBox.appendChild(messageElement);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    function receiveMessage(sender, message) {
      const messageElement = createMessageElement(sender, message, false);
      chatBox.appendChild(messageElement);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    function createMessageElement(sender, message, isCurrentUser) {
      const messageContainer = document.createElement('div');
      messageContainer.classList.add('message');
      if (isCurrentUser) {
        messageContainer.classList.add('user-message');
      }

      const senderElement = document.createElement('div');
      senderElement.textContent = sender;
      senderElement.classList.add('sender');
      messageContainer.appendChild(senderElement);

      const messageContent = document.createElement('div');
      messageContent.textContent = message;
      messageContainer.appendChild(messageContent);

      return messageContainer;
    }

    // Simulated incoming message (replace with actual WebSocket handling)
    setTimeout(() => {
      receiveMessage('Friend456', 'Hello there!');
    }, 2000);
  </script>
</body>
</html>
